(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["7386b4f2"],{"0b86":function(i,t,e){"use strict";var n=e("fcc5"),a=e.n(n);a.a},"34ab":function(i,t,e){"use strict";e.r(t);var n=e("5dc0"),a=e("6969");for(var o in a)"default"!==o&&function(i){e.d(t,i,function(){return a[i]})}(o);e("0b86");var s=e("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,null,null);r.options.__file="Admin.vue",t["default"]=r.exports},"5dc0":function(i,t,e){"use strict";var n=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("q-page",{staticClass:"flex flex-left"},[e("div",[e("h6",[i._v("Admin")]),e("div",{staticClass:"box"},[e("q-btn",{attrs:{label:"List Invitations"},on:{click:i.listInvites}}),e("q-scroll-area",{staticStyle:{width:"200px",height:"100px"}},i._l(i.invites,function(t){return e("q-list",{key:t.email},[i._v("\n                    "+i._s(t.email)+"\n                ")])}),1)],1),e("div",{staticClass:"box"},[e("h5",[i._v("Add One Email to Invitations")]),e("q-input",{model:{value:i.inviteEmail,callback:function(t){i.inviteEmail=t},expression:"inviteEmail"}}),e("q-btn",{attrs:{label:"Add Invitation"},on:{click:i.addInvite}})],1),e("div",{staticClass:"box"},[e("h5",[i._v("Remove One Email from Invitations")]),e("q-input",{model:{value:i.removeEmail,callback:function(t){i.removeEmail=t},expression:"removeEmail"}}),e("q-btn",{attrs:{label:"Remove Invitation"},on:{click:i.removeInvite}})],1),e("div",{staticClass:"box"},[e("q-btn",{attrs:{label:"List Users"},on:{click:i.listUsers}}),e("br"),e("q-scroll-area",{staticStyle:{width:"200px",height:"100px"}},i._l(i.users,function(t){return e("q-list",{key:t.email},[i._v("\n                    "+i._s(t.email+" "+t._id)+"\n                ")])}),1)],1),e("div",{staticClass:"box"},[e("h5",[i._v("Display a User")]),e("q-input",{model:{value:i.displayEmail,callback:function(t){i.displayEmail=t},expression:"displayEmail"}}),e("q-btn",{attrs:{label:"Display User"},on:{click:i.displayUser}})],1),e("div",{staticClass:"box"},[e("h5",[i._v("Remove a User")]),e("q-input",{model:{value:i.removeUserEmail,callback:function(t){i.removeUserEmail=t},expression:"removeUserEmail"}}),e("q-btn",{attrs:{label:"Remove User"},on:{click:i.removeUser}})],1),e("div",{staticClass:"box"},[e("h5",[i._v("Manage Configuration")]),e("b",[i._v("Is Private: ")]),e("q-input",{model:{value:i.isPrivatePortal,callback:function(t){i.isPrivatePortal=t},expression:"isPrivatePortal"}}),e("br"),e("b",[i._v("Require Invite: ")]),e("q-input",{model:{value:i.requiresInvite,callback:function(t){i.requiresInvite=t},expression:"requiresInvite"}}),e("br"),e("b",[i._v("Admin Email: ")]),e("q-input",{model:{value:i.adminEmail,callback:function(t){i.adminEmail=t},expression:"adminEmail"}}),e("br"),e("q-btn",{attrs:{label:"Save Config"},on:{click:i.saveConfig}})],1),e("div",{staticClass:"box",staticStyle:{"background-color":"red"}},[e("h5",[i._v("Change Node Type")]),e("b",[i._v("Select New NodeType, Enter NodeId, Submit")]),e("br"),e("q-radio",{attrs:{val:"question",label:"Question"},on:{input:i.doRadio},model:{value:i.option,callback:function(t){i.option=t},expression:"option"}}),e("q-radio",{attrs:{val:"answer",label:"Answer/Idea"},on:{input:i.doRadio},model:{value:i.option,callback:function(t){i.option=t},expression:"option"}}),e("q-radio",{attrs:{val:"pro",label:"Pro"},on:{input:i.doRadio},model:{value:i.option,callback:function(t){i.option=t},expression:"option"}}),e("q-radio",{attrs:{val:"con",label:"Con"},on:{input:i.doRadio},model:{value:i.option,callback:function(t){i.option=t},expression:"option"}}),e("br"),e("br"),e("b",[i._v("Node ID")]),e("br"),e("q-input",{model:{value:i.nodeId,callback:function(t){i.nodeId=t},expression:"nodeId"}}),e("q-btn",{attrs:{label:"Change Node Type"},on:{click:i.changeNodeType}})],1)])])},a=[];n._withStripped=!0,e.d(t,"a",function(){return n}),e.d(t,"b",function(){return a})},"665e":function(i,t,e){"use strict";var n=e("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e("7514");var a=n(e("3156")),o=n(e("d722")),s=e("2f62"),r=o.default.service("invitations"),l=o.default.service("users"),c=o.default.service("conversation"),d=(o.default.service("configuration"),{data:function(){return{invites:[],inviteEmail:"",removeEmail:"",users:[],displayEmail:"",removeUserEmail:"",option:"",nodeId:"",isPrivatePortal:"",requiresInvite:!0,adminEmail:""}},computed:(0,a.default)({},(0,s.mapGetters)("configuration",{currentConfig:"getCopy"})),mounted:function(){var i=this;this.$store.commit("questView",!1),this.fetchCurrentConfiguration(1).then(function(t){console.log("Got config",t);var e=t.adminEmail,n=t.requiresInvite,a=t.isPrivatePortal;i.$data.isPrivatePortal=a,i.$data.requiresInvite=n,i.$data.adminEmail=e})},methods:(0,a.default)({},(0,s.mapActions)("configuration",{fetchCurrentConfiguration:"get",updateConfiguration:"update"}),{saveConfig:function(){var i={};i.isPrivatePortal=this.$data.isPrivatePortal,i.requiresInvite=this.$data.requiresInvite,i.adminEmail=this.$data.adminEmail,console.log("SavingConfig",i,this.$data.isPrivatePortal),this.updateConfiguration([1,i]).then(console.log,console.error)},doRadio:function(i){this.$data.option=i},listInvites:function(){var i=this;r.find({query:{$limit:100}}).then(function(t){i.$data.invites=t.data})},addInvite:function(){var i=this,t=this.$data.inviteEmail.trim();if(""!==t){var e={};e.email=t,r.create(e).then(function(t){i.$q.notify({type:"positive",message:"Invitations added"})}).catch(function(t){i.$q.notify({type:"negative",message:"Error "+t})}),this.$data.inviteEmail=""}},removeInvite:function(){var i=this,t=this.$data.removeEmail.trim();if(""!==t){var e={};e.email=t,r.find({query:{email:t}}).then(function(t){r.remove(t.data[0]._id).then(function(t){i.$q.notify({type:"positive",message:"Invitations removed"})}).catch(function(t){i.$q.notify({type:"negative",message:"Error-1 "+t})})}).catch(function(t){i.$q.notify({type:"negative",message:"Error-2 "+t})}),this.$data.removeEmail=""}},listUsers:function(){var i=this;l.find({query:{$limit:100}}).then(function(t){i.$data.users=t.data})},displayUser:function(){var i=this,t=this.$data.displayEmail.trim();if(""!==t){var e={},n={};n.email=t,e.query=n,l.find(e).then(function(t){alert(JSON.stringify(t)),i.displayEmail=""})}},removeUser:function(){var i=this,t=this.$data.removeUserEmail.trim();if(""!==t){var e={},n={};n.email=t,e.query=n,l.find(e).then(function(t){var a=t.data[0];e={},n._id=a._id,e.query=n,l.remove(a._id).then(function(t){i.removeUserEmail=""})})}},getLargeIcon:function(i){return"question"===i?"statics/images/ibis/issue.png":"answer"===i?"statics/images/ibis/position.png":"pro"===i?"statics/images/ibis/plus.png":"con"===i?"statics/images/ibis/minus.png":""},getSmallIcon:function(i){return"question"===i?"statics/images/ibis/issue_sm.png":"answer"===i?"statics/images/ibis/position_sm.png":"pro"===i?"statics/images/ibis/plus_sm.png":"con"===i?"statics/images/ibis/minus_sm.png":""},changeNodeType:function(){var i=this,t=this.$data.nodeId.trim(),e=this.$data.option,n=e+"s";c.find({query:{id:t,skippop:!0}}).then(function(a){var o=a.data[0],s=o.type+"s";console.info("CNT-Child",JSON.stringify(o)),o.type=e,o.img=i.getLargeIcon(e),o.imgsm=i.getSmallIcon(e),console.info("CNT-Child-2",JSON.stringify(o));var r=o.parentId;c.update(o.id,o).then(function(e){r&&c.find({query:{id:r,skippop:!0}}).then(function(e){console.info("XXX",r,e);var a=e.data[0];console.info("CNT-Parent",JSON.stringify(a));var o=a[s];if(console.info("OLDKIDS",o),o){var l=o.indexOf(t);console.info("WHERE",l),-1!==l&&(o.splice(l,1),console.info("OLDKIDS-2",o),a[s]=o)}var d=a[n];d||(d=[]),l=d.indexOf(t),console.info("WHERE-2",l),-1===l&&(d.push(t),a[n]=d),console.info("CNT-Parent-2",JSON.stringify(a)),c.update(a.id,a).then(function(t){i.$data.nodeId=""})})})})}})});t.default=d},6969:function(i,t,e){"use strict";e.r(t);var n=e("665e"),a=e.n(n);for(var o in n)"default"!==o&&function(i){e.d(t,i,function(){return n[i]})}(o);t["default"]=a.a},fcc5:function(i,t,e){}}]);